@using _1_RentingBS
@using _2_RentingModel
@inherits LayoutComponentBase
@inject ILocalizationService _localizationService
@inject ILogger<MainLayout> _logger

@* Required *@
<MudThemeProvider />
<MudPopoverProvider />

@* Needed for dialogs *@
<MudDialogProvider />

@* Needed for snackbars *@      
<MudSnackbarProvider />

<div class="page">

    <main style="display: flex; flex-direction: column; min-height: 100vh;">

        @* Menu Mobile (Drawer) *@
        <MudHidden Breakpoint="Breakpoint.LgAndUp">
            @if (_drawerOpen)
            {
                <MudDrawer @bind-Open="@_drawerOpen" Anchor="Anchor.Right" Elevation="1" Variant="@DrawerVariant.Temporary" Class="mudrawer-style">
                    <MudDrawerHeader>
                        <MudText Typo="Typo.h6">Menu</MudText>
                    </MudDrawerHeader>
                    <MudNavMenu>
                        <MudNavLink Href=""  Match="NavLinkMatch.All" Icon="@Icons.Material.Filled.Home">@Word("Home")</MudNavLink>
                        <MudNavLink Href="/accommodation" Icon="@Icons.Material.Filled.HolidayVillage">@Word("Our Bungalows")</MudNavLink>
                        <MudNavLink Href="/guadeloupe" Icon="@Icons.Material.Filled.Flag">@Word("GuadeloupeName1")</MudNavLink>
                        <MudNavLink Href="/activities" Icon="@Icons.Material.Filled.Man">@Word("Activities")</MudNavLink>
                        <MudNavLink Href="/contact" Icon="@Icons.Material.Filled.Phone">@Word("Contact")</MudNavLink>
                        <MudNavLink Href="https://gitecannelle.com/" Target="_blank" Icon="@Icons.Material.Filled.Info">@Word("About")</MudNavLink>
                    </MudNavMenu>
                </MudDrawer>
            }
        </MudHidden>

        <div id="navbar" class="top-row tropical-nav">
            <div class="nav-left-container">
                <div>
                    <div style="display: flex; align-items: center;">
                        <a href="/" class="home-link ">
                            <div class="icon-class">
                                <img src="/lunikIconRound.png" alt="Logo" style="height: 140%; width: 140%; object-fit: cover;">
                            </div>
                        </a>
                        <a href="/" style="margin-left:1rem">
                            <MudText Class="nav-title-main " Style="color: white; font-weight: 700;vertical-align : middle;">Le Belvédère </MudText>
                            <MudText Class="nav-title-sub" Style="color: white; font-weight: 700;vertical-align : middle;">de l'Autre-Bord</MudText>
                        </a>
                    </div>
                </div>
                <MudHidden Breakpoint="Breakpoint.MdAndDown">
                    <div Class="navbar-tabs" style=" margin-left: 2rem">
                        <NavLink href="/" Match="NavLinkMatch.All" class="tropical-navbar">@Word("Home")</NavLink>
                        <NavLink href="/accommodation" class="tropical-navbar">@Word("Our accommodations")</NavLink>
                        <NavLink href="/guadeloupe" class="tropical-navbar">@Word("GuadeloupeName1")</NavLink>
                        <NavLink href="/activities" class="tropical-navbar">@Word("Activities")</NavLink>
                        <NavLink href="/contact" class="tropical-navbar">@Word("Contact")</NavLink>
                    </div>
                </MudHidden>
            </div>

            <div style="display: flex; align-items: center; gap: 1rem; position: relative;">
                @* Navigation Desktop (Masquée sur mobile) *@
                <MudHidden Breakpoint="Breakpoint.MdAndDown">
                    <a href="https://gitecannelle.com/" target="_blank" class="about-link">@Word("About")</a>
                </MudHidden>

                <MudMenu AnchorOrigin="Origin.BottomCenter" TransformOrigin="Origin.TopLeft">
                    <ActivatorContent>
                        <MudIconButton Icon="@Icons.Material.Filled.Language" Color="Color.Inherit" Style="color: white;" />
                    </ActivatorContent>
                    <ChildContent>
                        @foreach (SupportedLanguagesEnum lang in Enum.GetValues(typeof(SupportedLanguagesEnum)))
                        {
                            <MudMenuItem OnClick="@(() => ChangeCulture(lang))">
                                <MudText>@lang.GetDisplayName()</MudText>
                            </MudMenuItem>
                        }
                    </ChildContent>
                </MudMenu>

                @* Bouton Menu Mobile (Masqué sur Desktop) *@
                <MudHidden Breakpoint="Breakpoint.LgAndUp">
                    <MudIconButton Icon="@Icons.Material.Filled.Menu" Color="Color.Inherit" OnClick="@((e) => DrawerToggle())" Style="color: white;" />
                </MudHidden>
            </div>
        </div>

        <article class="content ">
            @Body
        </article>

        <footer class="footer-row">
            <MudText Typo="Typo.caption" Style="margin: 0;">© 2025 Lunik Rentals. @Word("All rights reserved").</MudText>
        </footer>
    </main>
</div>

<div id="blazor-error-ui" data-nosnippet>
    An unhandled error has occurred.
    <a href="." class="reload">Reload</a>
    <span class="dismiss">🗙</span>
</div>

